<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
  <%- include('../partials/nav') %>
<body>

  <div class="details content">
    <h2><%= blog.title %></h2>
    <div class="content">
      <p><%= blog.body %></p>
    </div>
    <a class="delete" data-doc="<%= blog._id %>">
       <img src="/trashcan.svg" alt="delete icon">
    </a>
  </div>
  <div class="image">
     <%= blog.image %>
    <!-- CRIAAAAAR O ESPAÃ‡P EJS PRA RECEBER A IMAGEM  -->
  </div>
  <%- include('../partials/footer') %>
  <script>
    const traschcan = document.querySelector('a.delete'); 
        traschcan.addEventListener('click',(e) =>{
          const endpoint = `/posts/${traschcan.dataset.doc}`  
          
          //fetch api, async
          fetch(endpoint,{
            method: 'DELETE' 
          }) 
          .then((response)=> response.json()) 
          .then((data) => window.location.href = data.redirect) 
          .catch(err=>console.log(err));
        })
  </script>
</body>
</html>